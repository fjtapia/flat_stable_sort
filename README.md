
<h1>Flat Stable Sort</h1>
<h3> <a href="https://github.com/fjtapia/flat_stable_sort">https://github.com/fjtapia/flat_stable_sort</a> </h3>


<h3>DESCRIPTION</h3>


This algorithm had been invented and implemented for the Boost library by the author.

The goal of the algorithm is provide a stable sort with a low additional memory.The algorithms provided by the compilers and libraries use an additional memory, usually of a half of the data to sort. This algorithm need an additional memory of 8K.

The stable sorting algorithms without additional memory are very slow compared with the algorithms with additional memory. Due this, it's very rare to find implementations outside the research environments.


This new algorithm provide around 80% - 90% of the speed of the sort algorithms provided by compilers and libraries. This algorithm had been designed for to be really fast when the data are near sorted. Many times the new elements are inserted at end the sorted elements, or some elements are modified, breaking the order of the elements.

In these cases, the flat stable_sort provide a very fast response, as you can see in the table below, compared with the st::sort std::stable_sort, and the other algorithms of the Boost Sort library.

The algorithm use a comparison object, in the same way as the standard library sort algorithms. If you don't define it, the comparison object defaults to std::less, which uses the < operator internally for comparisons.


All the algorithms of the benchmark use comparison object, except spreadsort, which use a different method ( You can see at detail in the Boost Sort documentation).

These two tables show the results with numbers. The results with objects and strings are similar. In the folder  result, you can see the results obtained  with numbers, strings and objects of different sizes, compared with the others algorithms in Linux with GCC. 6.0.


Different compilers can provide different results, due, mainly of the quality of the optimization of the compilers.                   


                       B O O S T      S O R T                   
                      S I N G L E    T H R E A D               
                  I N T E G E R    B E N C H M A R K                                                                   
                SORT OF 100 000 000 NUMBERS OF 64 BITS
                
        [ 1 ] std::sort   [ 2 ] pdqsort          [ 3 ] std::stable_sort
        [ 4 ] spin_sort   [ 5 ] flat_stable_sort [ 6 ] timsort
        [ 7 ] spreadsort
                            |      |      |      |      |      |      |      |
                            | [ 1 ]| [ 2 ]| [ 3 ]| [ 4 ]| [ 5 ]| [ 6 ]| [ 7 ]|
        --------------------+------+------+------+------+------+------+------+
        random              | 8.20 | 3.90 | 8.51 | 9.45 |10.78 |13.13 | 4.22 |
                            |      |      |      |      |      |      |      |
        sorted              | 1.91 | 0.12 | 4.86 | 0.06 | 0.07 | 0.07 | 0.06 |
        sorted + 0.1% end   | 6.50 | 2.86 | 4.89 | 0.41 | 0.36 | 0.20 | 3.14 |
        sorted +   1% end   |14.02 | 3.35 | 4.96 | 0.55 | 0.49 | 0.34 | 3.62 |
        sorted +  10% end   | 6.78 | 4.10 | 5.71 | 1.31 | 1.39 | 1.41 | 4.31 |
                            |      |      |      |      |      |      |      |
        sorted + 0.1% mid   | 4.56 | 3.22 | 6.51 | 1.85 | 2.47 | 2.48 | 3.22 |
        sorted +   1% mid   | 4.61 | 3.57 | 7.03 | 2.07 | 3.06 | 3.28 | 3.77 |
        sorted +  10% mid   | 6.48 | 4.64 | 9.42 | 3.92 | 5.46 | 7.12 | 4.93 |
                            |      |      |      |      |      |      |      |
        reverse sorted      | 1.37 | 0.26 | 5.10 | 0.13 | 0.14 | 0.13 | 1.77 |
        rv sorted + 0.1% end| 7.64 | 2.89 | 5.21 | 0.52 | 0.41 | 0.26 | 2.79 |
        rv sorted +   1% end| 5.16 | 3.27 | 5.27 | 0.65 | 0.55 | 0.41 | 3.40 |
        rv sorted +  10% end| 4.78 | 4.11 | 6.01 | 1.43 | 1.46 | 1.48 | 4.31 |
                            |      |      |      |      |      |      |      |
        rv sorted + 0.1% mid| 4.53 | 3.22 | 6.51 | 1.85 | 2.46 | 2.47 | 3.22 |
        rv sorted +   1% mid| 4.61 | 3.57 | 7.03 | 2.07 | 3.16 | 3.28 | 3.76 |
        rv sorted +  10% mid| 6.47 | 4.64 | 9.42 | 3.92 | 5.46 | 7.12 | 4.93 |
        --------------------+------+------+------+------+------+------+------+

    Memory used by the stable sort algorithms
    
	    Algorithm 	      Memory used ( MB)
	    ------------------------------------
	    std::stable_sort 	1177
	    spinsort 	        1175
	    flat_stable_sort 	 788
	    timsort 	        1173
	    spreadsort 	         785


The algorithms are **exception safe**, meaning that,  the exceptions generated by the algorithms guarantee the integrity of the objects to sort, but not their relative order. If the exception is generated inside the objects (in the move or in the copy constructor.. ) the results can be unpredictable.

This library is **include only**. There is no need to link with any external static or dynamic library. This doesn't  depend on any other boost files, variables or libraries or any other external libraries. To use this library, just include the files in the boost/sort/parallel folder.

<h2>Author and Copyright</h2>
This library had been create to be integrated in the [Boost](http://www.boost.org) library
It's pending of the final approval, due this can suffer some changes until the final version and definitive approval in the boost library.  You can find in  [https://github.com/fjtapia/sort_parallel](https://github.com/fjtapia/sort_parallel)


Copyright 2017  [Francisco Tapia *(fjtapia@gmail.com)* ](mail:fjtapia@gmail.com)
Distributed under the [Boost Software License, Version 1.0. ](http://www.boost.org/LICENSE_1_0.txt)  (See http://www.boost.org/LICENSE_1_0.txt)
